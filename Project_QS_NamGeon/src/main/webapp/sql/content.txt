-- 콘텐츠 목록 --
DROP SEQUENCE CONTENT_SEQ;
CREATE SEQUENCE CONTENT_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1
;

DROP TABLE CONTENT_LIST CASCADE CONSTRAINTS;
CREATE TABLE CONTENT_LIST(
  CONTENT_KEY NUMBER PRIMARY KEY,
  TITLE VARCHAR2(60) NOT NULL,
  EXPLANATION VARCHAR2(150) NOT NULL,
  CREATE_USER NUMBER NOT NULL REFERENCES MEMBER_INFO(MEMBER_KEY) ON DELETE CASCADE,
  THUMBNAIL VARCHAR2(30) NOT NULL,
  CONTENT_COUNT NUMBER NOT NULL,
  CONTENT_PUBLIC VARCHAR2(1) DEFAULT 'N' CHECK(CONTENT_PUBLIC IN('N','Y')),
  CONTENT_TYPE VARCHAR2(6) CHECK(CONTENT_TYPE IN('QUIZ','SURVEY')),
  CREATE_DAY DATE DEFAULT SYSDATE
);

INSERT INTO CONTENT_LIST(CONTENT_KEY,TITLE,EXPLANATION,CREATE_USER,THUMBNAIL,CONTENT_COUNT,CONTENT_PUBLIC,CONTENT_TYPE)
VALUES(CONTENT_SEQ.NEXTVAL,'동물퀴즈','동물을 맞추는 퀴즈입니다.',1,'임시이미지.jpg',2,'Y','QUIZ');

SELECT * FROM CONTENT_LIST;
SELECT MAX(CONTENT_KEY) LAST_KEY FROM CONTENT_LIST;

SELECT * FROM CONTENT_LIST;

SELECT MEMBER_KEY,BAN,USER_NAME FROM MEMBER_INFO;

SELECT CONTENT_KEY,TITLE,EXPLANATION,T10.CREATE_USER,THUMBNAIL,CONTENT_COUNT,CONTENT_PUBLIC,CREATE_DAY,T20.BAN,T20.USER_NAME
FROM (SELECT CONTENT_KEY,TITLE,EXPLANATION,CREATE_USER,THUMBNAIL,CONTENT_COUNT,CONTENT_PUBLIC,CREATE_DAY
      FROM CONTENT_LIST)T10
    ,(SELECT MEMBER_KEY,BAN,USER_NAME 
      FROM MEMBER_INFO) T20
WHERE T10.CREATE_USER = T20.MEMBER_KEY
ORDER BY CONTENT_KEY;





