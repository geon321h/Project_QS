-- 참여 기록 --
DROP TABLE QUESTIONS CASCADE CONSTRAINTS;
CREATE TABLE QUESTIONS(
  QUESTION_KEY NUMBER,
  MEMBER_KEY NUMBER REFERENCES MEMBER_INFO(MEMBER_KEY) ON DELETE CASCADE,
  QUE_TITLE VARCHAR2(60),
  QUE_CONTENT VARCHAR2(450),
  QUE_TYPE VARCHAR2(30),
  REPLY_KEY NUMBER DEFAULT 0,
  QUE_DAY DATE DEFAULT SYSDATE
   , CONSTRAINT QUESTIONS PRIMARY KEY (QUESTION_KEY, MEMBER_KEY)
);

INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'제목 문의','문의내용임','이용문의');
INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'제목 문의','문의내용임','이용문의');      
INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'123','123','계정문의');         
INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE,REPLY_KEY)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'계정이 이상해요','답변입니다.','답변',4);   
      
UPDATE QUESTIONS SET QUE_DAY = sysdate WHERE MEMBER_KEY = 1 AND QUESTION_KEY =4;
      
SELECT * FROM QUESTIONS;      

SELECT ROWNUM RANK,QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE,REPLY_KEY,QUE_DAY 
FROM QUESTIONS 
ORDER BY QUE_DAY DESC;      

INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=2),
      2,'123','123','이용문의');  