-- 참여 기록 --
DROP TABLE QUESTIONS CASCADE CONSTRAINTS;
CREATE TABLE QUESTIONS(
  QUESTION_KEY NUMBER,
  MEMBER_KEY NUMBER REFERENCES MEMBER_INFO(MEMBER_KEY) ON DELETE CASCADE,
  QUE_TITLE VARCHAR2(60),
  QUE_CONTENT VARCHAR2(180),
  QUE_TYPE VARCHAR2(30),
  REPLY_KEY NUMBER DEFAULT 0,
  QUE_DAY DATE DEFAULT SYSDATE
   , CONSTRAINT QUESTIONS PRIMARY KEY (QUESTION_KEY, MEMBER_KEY)
);

INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'제목 문의','문의내용임','이용문의');
INSERT INTO QUESTIONS (QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE)
VALUES((SELECT NVL(MAX(QUESTION_KEY),0)+1 FROM QUESTIONS WHERE MEMBER_KEY=1),
      1,'제목 문의','문의내용임','이용문의');      
      
SELECT * FROM QUESTIONS;      

SELECT ROWNUM RANK,QUESTION_KEY,MEMBER_KEY,QUE_TITLE,QUE_CONTENT,QUE_TYPE,REPLY_KEY,QUE_DAY 
FROM (SELECT *
      FROM QUESTIONS 
      WHERE MEMBER_KEY = 1
      ORDER BY QUE_DAY DESC);      