-- 참여 댓글 기록 --
DROP SEQUENCE COMMENT_SEQ;
CREATE SEQUENCE COMMENT_SEQ
INCREMENT BY 1
START WITH 1
MINVALUE 1
;

DROP TABLE CONTENT_COMMENT CASCADE CONSTRAINTS;
CREATE TABLE CONTENT_COMMENT(
  COMMENT_KEY NUMBER PRIMARY KEY,
  CONTENT_KEY NUMBER REFERENCES CONTENT_LIST(CONTENT_KEY) ON DELETE CASCADE,
  MEMBER_KEY NUMBER REFERENCES MEMBER_INFO(MEMBER_KEY) ON DELETE CASCADE,
  COMMENT_TEXT VARCHAR2(60),
  COMMENT_DAY DATE DEFAULT SYSDATE
);

INSERT INTO CONTENT_COMMENT(COMMENT_KEY,CONTENT_KEY,MEMBER_KEY,COMMENT_TEXT)
VALUES (COMMENT_SEQ.NEXTVAL,1,1,'댓글');


INSERT INTO CONTENT_COMMENT(COMMENT_KEY,CONTENT_KEY,MEMBER_KEY,COMMENT_TEXT)
VALUES (COMMENT_SEQ.NEXTVAL,41,2,'댓글');

SELECT COMMENT_KEY,CONTENT_KEY,T10.MEMBER_KEY,COMMENT_TEXT,COMMENT_DAY
FROM (SELECT COMMENT_KEY,CONTENT_KEY,MEMBER_KEY,COMMENT_TEXT,COMMENT_DAY
      FROM CONTENT_COMMENT
      WHERE CONTENT_KEY = 41) T10
     ,(SELECT MEMBER_KEY,BAN,USER_NAME
      FROM MEMBER_INFO
      WHERE BAN = 'N') T20
WHERE  T10.MEMBER_KEY = T20.MEMBER_KEY;

SELECT * 
FROM CONTENT_COMMENT;




            




